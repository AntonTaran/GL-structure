<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="utf-8">
   <base target="_top">
   
   <title>Tree Example</title>
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/treant-js/1.0/Treant.css">
   
   <style>
      /*! normalize.css v8.0.0 | MIT License | github.com/necolas/normalize.css */
      /* Document
         ========================================================================== */
      /**
       * 1. Correct the line height in all browsers.
       * 2. Prevent adjustments of font size after orientation changes in iOS.
       */
      html {
         line-height: 1.15;
         /* 1 */
         -webkit-text-size-adjust: 100%;
         /* 2 */ }
      
      /* Sections
         ========================================================================== */
      /**
       * Remove the margin in all browsers.
       */
      body {
         margin: 0; }
      
      /**
       * Correct the font size and margin on `h1` elements within `section` and
       * `article` contexts in Chrome, Firefox, and Safari.
       */
      h1 {
         font-size: 2em;
         margin: 0.67em 0; }
      
      /* Grouping content
         ========================================================================== */
      /**
       * 1. Add the correct box sizing in Firefox.
       * 2. Show the overflow in Edge and IE.
       */
      hr {
         box-sizing: content-box;
         /* 1 */
         height: 0;
         /* 1 */
         overflow: visible;
         /* 2 */ }
      
      /**
       * 1. Correct the inheritance and scaling of font size in all browsers.
       * 2. Correct the odd `em` font sizing in all browsers.
       */
      pre {
         font-family: monospace, monospace;
         /* 1 */
         font-size: 1em;
         /* 2 */ }
      
      /* Text-level semantics
         ========================================================================== */
      /**
       * Remove the gray background on active links in IE 10.
       */
      a {
         background-color: transparent; }
      
      /**
       * 1. Remove the bottom border in Chrome 57-
       * 2. Add the correct text decoration in Chrome, Edge, IE, Opera, and Safari.
       */
      abbr[title] {
         border-bottom: none;
         /* 1 */
         text-decoration: underline;
         /* 2 */
         text-decoration: underline dotted;
         /* 2 */ }
      
      /**
       * Add the correct font weight in Chrome, Edge, and Safari.
       */
      b,
      strong {
         font-weight: bolder; }
      
      /**
       * 1. Correct the inheritance and scaling of font size in all browsers.
       * 2. Correct the odd `em` font sizing in all browsers.
       */
      code,
      kbd,
      samp {
         font-family: monospace, monospace;
         /* 1 */
         font-size: 1em;
         /* 2 */ }
      
      /**
       * Add the correct font size in all browsers.
       */
      small {
         font-size: 80%; }
      
      /**
       * Prevent `sub` and `sup` elements from affecting the line height in
       * all browsers.
       */
      sub,
      sup {
         font-size: 75%;
         line-height: 0;
         position: relative;
         vertical-align: baseline; }
      
      sub {
         bottom: -0.25em; }
      
      sup {
         top: -0.5em; }
      
      /* Embedded content
         ========================================================================== */
      /**
       * Remove the border on prod.bundle inside links in IE 10.
       */
      img {
         border-style: none; }
      
      /* Forms
         ========================================================================== */
      /**
       * 1. Change the font styles in all browsers.
       * 2. Remove the margin in Firefox and Safari.
       */
      button,
      input,
      optgroup,
      select,
      textarea {
         font-family: inherit;
         /* 1 */
         font-size: 100%;
         /* 1 */
         line-height: 1.15;
         /* 1 */
         margin: 0;
         /* 2 */ }
      
      /**
       * Show the overflow in IE.
       * 1. Show the overflow in Edge.
       */
      button,
      input {
         /* 1 */
         overflow: visible; }
      
      /**
       * Remove the inheritance of text transform in Edge, Firefox, and IE.
       * 1. Remove the inheritance of text transform in Firefox.
       */
      button,
      select {
         /* 1 */
         text-transform: none; }
      
      /**
       * Correct the inability to style clickable types in iOS and Safari.
       */
      button,
      [type="button"],
      [type="reset"],
      [type="submit"] {
         -webkit-appearance: button; }
      
      /**
       * Remove the inner border and padding in Firefox.
       */
      button::-moz-focus-inner,
      [type="button"]::-moz-focus-inner,
      [type="reset"]::-moz-focus-inner,
      [type="submit"]::-moz-focus-inner {
         border-style: none;
         padding: 0; }
      
      /**
       * Restore the focus styles unset by the previous rule.
       */
      button:-moz-focusring,
      [type="button"]:-moz-focusring,
      [type="reset"]:-moz-focusring,
      [type="submit"]:-moz-focusring {
         outline: 1px dotted ButtonText; }
      
      /**
       * Correct the padding in Firefox.
       */
      fieldset {
         padding: 0.35em 0.75em 0.625em; }
      
      /**
       * 1. Correct the text wrapping in Edge and IE.
       * 2. Correct the color inheritance from `fieldset` elements in IE.
       * 3. Remove the padding so developers are not caught out when they zero out
       *    `fieldset` elements in all browsers.
       */
      legend {
         box-sizing: border-box;
         /* 1 */
         color: inherit;
         /* 2 */
         display: table;
         /* 1 */
         max-width: 100%;
         /* 1 */
         padding: 0;
         /* 3 */
         white-space: normal;
         /* 1 */ }
      
      /**
       * Add the correct vertical alignment in Chrome, Firefox, and Opera.
       */
      progress {
         vertical-align: baseline; }
      
      /**
       * Remove the default vertical scrollbar in IE 10+.
       */
      textarea {
         overflow: auto; }
      
      /**
       * 1. Add the correct box sizing in IE 10.
       * 2. Remove the padding in IE 10.
       */
      [type="checkbox"],
      [type="radio"] {
         box-sizing: border-box;
         /* 1 */
         padding: 0;
         /* 2 */ }
      
      /**
       * Correct the cursor style of increment and decrement buttons in Chrome.
       */
      [type="number"]::-webkit-inner-spin-button,
      [type="number"]::-webkit-outer-spin-button {
         height: auto; }
      
      /**
       * 1. Correct the odd appearance in Chrome and Safari.
       * 2. Correct the outline style in Safari.
       */
      [type="search"] {
         -webkit-appearance: textfield;
         /* 1 */
         outline-offset: -2px;
         /* 2 */ }
      
      /**
       * Remove the inner padding in Chrome and Safari on macOS.
       */
      [type="search"]::-webkit-search-decoration {
         -webkit-appearance: none; }
      
      /**
       * 1. Correct the inability to style clickable types in iOS and Safari.
       * 2. Change font properties to `inherit` in Safari.
       */
      ::-webkit-file-upload-button {
         -webkit-appearance: button;
         /* 1 */
         font: inherit;
         /* 2 */ }
      
      /* Interactive
         ========================================================================== */
      /*
       * Add the correct display in Edge, IE 10+, and Firefox.
       */
      details {
         display: block; }
      
      /*
       * Add the correct display in all browsers.
       */
      summary {
         display: list-item; }
      
      /* Misc
         ========================================================================== */
      /**
       * Add the correct display in IE 10+.
       */
      template {
         display: none; }
      
      /**
       * Add the correct display in IE 10.
       */
      [hidden] {
         display: none; }
      
      * {
         font-family: Helvetica, sans-serif;
         box-sizing: border-box;
         color: #041515; }
      
      a {
         display: block;
         text-decoration: none;
         color: dodgerblue; }
      
      a:active {
         opacity: .9; }
      
      ul {
         list-style-type: none;
         padding-left: 0; }
      
      button {
         border: none; }
      
      button:focus {
         outline: none;
         border: none; }
      
      button:active {
         outline: none;
         border: none;
         opacity: .9; }
      
      h2 {
         font-size: 3rem;
         font-weight: normal;
         line-height: 1.21; }
      
      p {
         line-height: 1.88;
         letter-spacing: 0.3px; }
      
      .wrapper {
         position: relative;
         padding: 0 3rem; }
      
      .section-description-holder {
         max-width: 720px;
         margin-bottom: 2rem; }
      
      .section-title {
         margin: 0 0 1rem; }
      
      .section-description {
         margin: 0; }
      .section-description + .section-description {
         margin-top: 1rem; }
      
      .btn {
         border-radius: 3px;
         background-color: #3597dc;
         color: #fff;
         font-weight: bold;
         font-size: 1.13rem;
         padding: .65rem 1.1rem;
         cursor: pointer;
         letter-spacing: normal; }
      .btn--transparent {
         background-color: transparent;
         color: #3597dc;
         padding: 0;
         font-weight: normal; }
      
      .tile .tile-image-holder {
         border-radius: 50%;
         overflow: hidden; }
      
      .tile .node-name, .tile .tile-name {
         display: block;
         text-align: center;
         overflow: hidden;
         text-overflow: ellipsis;
         font-weight: bold;
         color: #3597dc; }
      
      .tile img, .tile .node-name, .tile .tile-name {
         pointer-events: none; }
      
      .tile p:last-child {
         margin-bottom: 0; }
      
      .tile .empty-image-state {
         display: block;
         width: 100%;
         height: 100%;
         background-color: #999; }
      
      .tile--small {
         width: 160px;
         height: 216px;
         padding: 30px .7rem 1rem;
         text-align: center;
         border-radius: 10px;
         background-color: rgba(239, 241, 245, 0.5);
         cursor: pointer; }
      .tile--small .tile-image-holder {
         width: 80px;
         height: 80px;
         margin: 0 auto 1.125rem; }
      .tile--small img {
         width: 100%;
         height: 100%; }
      .tile--small .node-name, .tile--small .tile-name {
         margin: 0 0 .4rem;
         line-height: 1.19; }
      .tile--small .name-desc, .tile--small .tile-desc {
         font-weight: bold;
         margin: 0 0 .4rem;
         line-height: 1.19; }
      
      .tile--big {
         width: 180px;
         height: 100%; }
      .tile--big .tile-image-holder {
         width: 150px;
         height: 150px;
         margin: 0 auto 1.125rem;
         border: 3px solid grey; }
      .tile--big .node-name, .tile--big .tile-name {
         margin: 0 0 .4rem;
         font-size: 1.125rem;
         line-height: 1.22;
         text-align: center; }
      .tile--big .name-desc, .tile--big .tile-desc {
         margin: 0 0 .4rem;
         font-size: 1.125rem;
         line-height: 1.22;
         text-align: center; }
      
      .tile--framed {
         box-shadow: 0 3px 6px 0 rgba(0, 0, 0, 0.16); }
      
      .tile--transparent .tile-image-holder, .tile--transparent .tile-name, .tile--transparent .tile-description {
         pointer-events: none; }
      
      .node.tile--small img {
         width: 80px;
         height: 80px;
         margin: 0 auto 15px;
         border-radius: 50%; }
      
      .scroll-top-btn {
         position: fixed;
         right: 50px;
         bottom: 50px;
         width: 60px;
         height: 60px;
         background-color: #fff;
         box-shadow: 0 4px 15px 0 rgba(0, 0, 0, 0.3);
         cursor: pointer;
         border-radius: 50%;
         transition: box-shadow .2s ease; }
      .scroll-top-btn:hover {
         box-shadow: 0 5px 20px 0 rgba(0, 0, 0, 0.4); }
      .scroll-top-btn:focus {
         box-shadow: 0 5px 25px 0 rgba(0, 0, 0, 0.8); }
      
      .container {
         position: relative;
         height: 100%;
         margin-bottom: 3.75rem; }
      
      #collapsable-example {
         width: 100%;
         transform-origin: 0 0;
         overflow: visible !important;
         transition: transform .2s ease; }
      
      .zoom-controls {
         display: inline-flex; }
      .zoom-controls .zoom-control {
         position: relative;
         width: 35px;
         height: 35px;
         line-height: 20px;
         text-align: center;
         background-color: #444;
         font-size: 1.2rem;
         cursor: pointer;
         user-select: none;
         transition: background-color .2s ease, opacity .2s ease; }
      .zoom-controls .zoom-control:hover {
         background-color: rgba(68, 68, 68, 0.8); }
      .zoom-controls .zoom-control + .zoom-control {
         margin-left: 10px; }
      .zoom-controls .zoom-control--disabled {
         pointer-events: none;
         opacity: .8; }
      .zoom-controls .decrease-zoom:before {
         content: '';
         position: absolute;
         top: 50%;
         left: 50%;
         transform: translate(-50%, -50%);
         width: 15px;
         height: 2px;
         background-color: #fff; }
      .zoom-controls .increase-zoom:before, .zoom-controls .increase-zoom:after {
         content: '';
         position: absolute;
         top: 50%;
         left: 50%;
         transform: translate(-50%, -50%);
         background-color: #fff; }
      .zoom-controls .increase-zoom:before {
         width: 15px;
         height: 2px; }
      .zoom-controls .increase-zoom:after {
         width: 2px;
         height: 15px; }
      .zoom-controls .fullscreen-mode:before {
         content: '';
         position: absolute;
         display: inline-block;
         width: 13px;
         height: 13px;
         border: 2px solid #fff;
         top: 50%;
         left: 50%;
         transform: translate(-50%, -50%); }
      
      /* Overwrite */
      .Treant > .node img {
         float: none; }
      
      .Treant .collapse-switch {
         position: absolute;
         top: auto;
         right: auto;
         bottom: 10px;
         left: 50%;
         transform: translateX(-50%) rotateX(180deg);
         width: 40px;
         height: 40px;
         cursor: pointer;
         border: none;
         transition: transform .3s ease; }
      .Treant .collapse-switch:before {
         content: '';
         position: absolute;
         transform: translate(-50%, -50%) rotate(-45deg);
         left: 50%;
         top: 42%;
         width: 9px;
         height: 9px;
         border-width: 0 0 2px 2px;
         border-color: #72849a;
         border-style: solid;
         pointer-events: none;
         transition: border-color .3s ease; }
      .Treant .collapse-switch:hover:before {
         border-color: #adb8c5; }
      
      .Treant .collapsed .collapse-switch {
         background-color: transparent;
         transform: translateX(-50%) rotateX(0); }
      
      .modal-overlay {
         position: fixed;
         width: 100vw;
         min-width: 100vh;
         height: 100%;
         z-index: 2;
         opacity: 0;
         transition: opacity .25s ease;
         pointer-events: none; }
      .modal-overlay--open {
         opacity: 1;
         pointer-events: auto;
         transition: opacity .2s ease; }
      
      .additional-info-modal {
         position: fixed;
         top: 50vh;
         left: 50%;
         transform: translate(-50%, -20%);
         width: 630px;
         min-height: 348px;
         padding-bottom: 70px;
         background: #fff;
         box-shadow: 0 4px 15px 0 rgba(0, 0, 0, 0.5);
         opacity: 0;
         transition: opacity .25s ease, transform .15s ease;
         z-index: 3;
         pointer-events: none; }
      .additional-info-modal--open {
         opacity: 1;
         transform: translate(-50%, -50%);
         pointer-events: auto;
         transition: opacity .2s ease, transform .1s ease; }
      
      .modal-content {
         display: flex;
         padding-left: 2.8rem;
         padding-bottom: 2.4rem; }
      
      .modal-footer, .modal-header {
         display: flex;
         align-items: center;
         padding: 0 1.3rem; }
      
      .modal-header {
         height: 60px;
         margin-bottom: 2rem;
         justify-content: space-between;
         border-bottom: 1px solid #72849a; }
      
      .modal-footer {
         position: absolute;
         bottom: 0;
         width: 100%;
         height: 70px;
         justify-content: flex-end;
         border-top: 1px solid #72849a; }
      .modal-footer .btn {
         margin-left: 1.15rem; }
      
      .close-btn {
         width: 16px;
         height: 16px;
         cursor: pointer;
         transform: rotate(45deg); }
      .close-btn:before, .close-btn:after {
         content: '';
         position: absolute;
         top: 50%;
         left: 50%;
         transform: translate(-50%, -50%);
         background-color: #72849a; }
      .close-btn:before {
         width: 4px;
         height: 20px;
         border-radius: 4px; }
      .close-btn:after {
         width: 20px;
         height: 4px;
         border-radius: 4px; }
      
      .image-holder {
         border: 1px solid #abb4c3;
         width: 150px;
         min-width: 150px;
         height: 150px;
         border-radius: 50%;
         margin-right: 1.8rem;
         overflow: hidden; }
      
      .personal-info-holder {
         overflow: hidden; }
      
      .personal-info {
         margin-bottom: 2rem; }
      .personal-info:last-child {
         margin-bottom: 0; }
      .personal-info .title, .personal-info .description {
         margin: 0 0 .3rem;
         font-size: 1.1rem; }
      .personal-info .description {
         overflow: hidden;
         text-overflow: ellipsis; }
      
      .header {
         position: sticky;
         position: -webkit-sticky;
         top: 0;
         padding: 0 0 1.5rem;
         background-color: #fff;
         z-index: 3; }
      
      .header-navigation {
         display: flex;
         flex-flow: row nowrap; }
      
      .top-navigation-menu {
         display: flex;
         margin: 0 0 0 auto; }
      .top-navigation-menu .nav-item + .nav-item {
         margin-left: 1.9rem; }
      .top-navigation-menu .nav-link {
         position: relative;
         padding-bottom: 5px;
         font-size: 1.125rem;
         font-weight: bold;
         color: #041515;
         transition: color .2s ease-in-out;
         cursor: pointer; }
      .top-navigation-menu .nav-link:hover {
         color: rgba(4, 21, 21, 0.5); }
      .top-navigation-menu .nav-link:before {
         content: '';
         position: absolute;
         bottom: 0;
         left: 50%;
         transform: translateX(-50%);
         width: 100%;
         height: 3px;
         background-color: #3597dc;
         opacity: 0;
         transition: opacity .2s ease; }
      .top-navigation-menu .nav-link--active:before {
         opacity: 1; }
      
      .single-tiles-section {
         display: flex;
         flex-flow: row wrap;
         margin: 0 -1.5625rem 8.8rem; }
      .single-tiles-section .tile-wrapper {
         margin-bottom: 2.2rem;
         padding: 0 25px; }
      
      .united-tiles-section {
         display: table;
         width: 100%;
         min-height: 340px;
         height: auto;
         margin-bottom: 3rem;
         background-color: rgba(239, 241, 245, 0.5); }
      
      .section-wrapper {
         display: table-row;
         height: 100%; }
      
      .united-tiles-section .tile-wrapper {
         padding: 0 2rem;
         margin-bottom: 3.125rem;
         box-sizing: content-box; }
      
      .united-tiles-section__title-holder, .united-tiles-section__tiles-holder {
         display: table-cell; }
      
      .united-tiles-section__title-holder {
         position: relative;
         width: 30px;
         height: 100%;
         border-radius: 5px 0 0 5px;
         overflow: hidden; }
      .strategic-focus-area .united-tiles-section__title-holder {
         background-color: #ff6602; }
      .technology-leads .united-tiles-section__title-holder {
         background-color: #99cc33; }
      .practices-leads .united-tiles-section__title-holder {
         background-color: #33cccc; }
      .united-tiles-section__title-holder .section-title {
         position: absolute;
         top: 50%;
         left: 50%;
         transform: translate(-50%, -50%) rotate(-90deg);
         font-size: 1.125rem;
         white-space: nowrap;
         color: #fff; }
      
      .united-tiles-section__tiles-holder {
         display: flex;
         flex-flow: row wrap;
         padding: 2.8rem 3.75rem;
         box-shadow: 0 3px 6px 0 rgba(0, 0, 0, 0.16); }
      
      .strategic-focus-area .united-tiles-section__image-holder {
         border-color: #ff6602; }
      
      .technology-leads .united-tiles-section__image-holder {
         border-color: #99cc33; }
      
      .practices-leads .united-tiles-section__image-holder {
         border-color: #33cccc; }
      
      .united-tiles-section .tile-name {
         font-weight: normal; }
      
      .united-tiles-section .tile-desc {
         font-weight: bold; }
      
      .division-head-tile {
         height: 100%;
         min-height: 240px; }
   </style>

</head>

<body>
<header id="header" class="header">
   <nav class="header-navigation">
      <ul class="top-navigation-menu">
         <li class="nav-item"><a data-attr="structure" class="nav-link">Structure</a></li>
         <li class="nav-item"><a data-attr="divisions" class="nav-link">Functional Divisions Heads</a>
         </li>
         <li class="nav-item"><a data-attr="focusAreas" class="nav-link">Strategic Focus Areas</a></li>
         <li class="nav-item"><a data-attr="technologyLeads" class="nav-link">Technology Leads</a></li>
         <li class="nav-item"><a data-attr="practicesLeads" class="nav-link">Practices Leads</a></li>
      </ul>
   </nav>
</header>

<main class="wrapper">
   
   <section id="structure" class="section">
      <div class="section-description-holder">
         <h2 class="section-title">Company Structure</h2>
         <p class="section-description">Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem
            Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a
            galley of type and scrambled it to make a type specimen book. </p>
      </div>
      
      <div class="container">
         <div class="modal-overlay"></div>
         <div class="zoom-controls">
            <button class="zoom-control decrease-zoom"></button>
            <button class="zoom-control increase-zoom"></button>
            <!--<button class="zoom-control fullscreen-mode"></button>-->
         </div>
         <div id="body"></div>
         <div class="chart" id="collapsable-example"></div>
         
         <div class="additional-info-modal">
            <div class="modal-header">
               <div class="title">Info</div>
               <span class="close-btn"></span>
            </div>
            
            <div class="modal-content">
               <div class="image-holder"></div>
               <div class="personal-info-holder">
                  <div class="personal-info">
                     <h4 class="title person-name"></h4>
                     <div class="description person-post"></div>
                  </div>
                  
                  <div class="personal-info">
                     <h4 class="title">Projects</h4>
                     <div class="description person-projects"></div>
                  </div>
               </div>
            </div>
            
            <div class="modal-footer">
               <button class="btn btn--transparent modal-cancel-btn">Cancel</button>
               <a href="#" target="_blank" class="btn modal-link-btn">View GLO Profile</a>
            </div>
         </div>
      </div>
   </section>
   
   <section id="divisions" class="section">
      <div class="section-description-holder">
         <h2 class="section-title">Functional Divisions Heads</h2>
         <p class="section-description">Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem
            Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a
            galley of type and scrambled it to make a type specimen book. </p>
      </div>
      
      <div class="single-tiles-section division-heads">
      </div>
   </section>
   
   <section id="focusAreas" class="section">
      <div class="section-description-holder">
         <h2 class="section-title">Strategic Focus Areas</h2>
         <p class="section-description">Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem
            Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a
            galley of type and scrambled it to make a type specimen book. </p>
      </div>
      
      <div class="united-tiles-section strategic-focus-area">
         <div class="section-wrapper">
            <div class="united-tiles-section__title-holder">
               <span class="section-title">Strategic Focus Areas</span>
            </div>
            <div class="united-tiles-section__tiles-holder strategic-focus-area__tiles-holder">
            </div>
         </div>
      </div>
   </section>
   
   <section id="technologyLeads" class="section">
      <div class="section-description-holder">
         <h2 class="section-title">Technology Leads</h2>
         <p class="section-description">Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem
            Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a
            galley of type and scrambled it to make a type specimen book. </p>
      </div>
      
      <div class="united-tiles-section technology-leads">
         <div class="section-wrapper">
            <div class="united-tiles-section__title-holder">
               <span class="section-title">Technology Leads</span>
            </div>
            <div class="united-tiles-section__tiles-holder technology-leads__tiles-holder">
            </div>
         </div>
      </div>
   </section>
   
   <section id="practicesLeads" class="section">
      <div class="section-description-holder">
         <h2 class="section-title">Practices Leads</h2>
         <p class="section-description">Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem
            Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a
            galley of type and scrambled it to make a type specimen book. </p>
      </div>
      
      <div class="united-tiles-section practices-leads">
         <div class="section-wrapper">
            <div class="united-tiles-section__title-holder">
               <span class="section-title">Practices Leads</span>
            </div>
            <div class="united-tiles-section__tiles-holder practices-leads__tiles-holder">
            </div>
         </div>
      </div>
   </section>
</main>

<a class="scroll-top-btn"></a>

<!--<script type="text/javascript" src='https://d3js.org/d3.v3.min.js'></script>-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.2.7/raphael.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/treant-js/1.0/Treant.js"></script>
<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>

<script>

  const chartData = <?= getData() ?>;
  const persons = JSON.parse(chartData);
  let sortedNodes = [];

  const dividionsHeadsData = <?= getDivisionsData() ?>;
  const headsOfDivisions = JSON.parse(dividionsHeadsData);

  const strateGicFocusAreasData = <?= getStrategicFocusAreasData() ?>;
  const focusAreasPersons = JSON.parse(strateGicFocusAreasData);

  const technologyLeadsData = <?= getTechnologyLeadsData() ?>;
  const technologyLeads = JSON.parse(technologyLeadsData);

  const practicesLeadsData = <?= getPracticesLeadsData() ?>;
  const practicesLeads = JSON.parse(practicesLeadsData);


  class PageNavigation {
    constructor(info) {
      this.addEventToLink(info.TOP_NAVIGATION);
      this.addEventToScrollButton(info.SCROLL_BUTTON);
    }

    addEventToLink(link) {
      link.addEventListener('click', (event) => {
        if (Array.from(event.target.classList).indexOf('nav-link') !== -1) {

          $('html, body').animate({
            scrollTop: $('#' + event.target.dataset.attr).offset().top - 40
          }, 200);
        }
      })
    }

    addEventToScrollButton(link) {
      link.addEventListener('click', () => {
        $('html, body').animate({
          scrollTop: $('body').offset().top
        }, 200);
      })
    }
  }

  new PageNavigation({
    TOP_NAVIGATION: document.querySelector('.top-navigation-menu'),
    SCROLL_BUTTON: document.querySelector('.scroll-top-btn'),
  });

  const svg1 = document.getElementsByTagName('svg');
  const wrapper = document.querySelector('#collapsable-example');
  const closeButton = document.querySelector('.close-btn');
  const container = document.querySelector('.container');
  const modalOverlay = document.querySelector('.modal-overlay');
  let tree;

  function setPersonId() {
    persons.map((el, ind) => el.HTMLid = ind + 1);
  }

  function combineNestedNodes() {
    setPersonId();
    let sortedNodes = [];

    for (let i = 0; i < persons.length; i++) {
      let element = persons[i];

      for (let j = i; j < persons.length; j++) {
        let element2 = persons[j];

        if (element.name === element2.par) {
          element.children.push(element2);
          showHideCollapsed(element2);
        }
      }
      sortedNodes.push(element);
    }

    sortedNodes.map((item) => {
      if (!item.children.length) {
        item.collapsed = false;
      }
    });

    return sortedNodes[0];
  }

  let chart_config = {
    chart: {
      container: "#collapsable-example",
      animateOnInit: true,
      callback: {
        onToggleCollapseFinished: function (e) {
//        scaleOnCollapse(e.X);
        }
      },
      node: {
        collapsable: true
      },
      levelSeparation: 30,
      siblingSeparation: 30,
      subTeeSeparation: 30,
      nodeAlign: 'TOP',
      connectors: {
        type: 'step',
        style: {
          'stroke': '#72849a',
          'stroke-width': 2,
        }
      },
      animation: {
        nodeAnimation: "linear ",
        nodeSpeed: 500,
        connectorsAnimation: "linear",
        connectorsSpeed: 100
      }
    },
    nodeStructure: combineNestedNodes()
  };

  function showHideCollapsed(element) {
//  console.log(element);
    if (!element.children.length) {
//    element.collapsed = false;
    }
  }

  function getScaleStep() {
    let scale = 0;

    return function () {
      scale = scale + (1 / 10);
      return scale;
    }
  }

  let counter = getScaleStep();
  let currentZoom = 1;
  let zoomStep = counter();

  class Modal {
    constructor(modalInfo) {
      this.modalInfo = modalInfo;
      this.addCancelBtnEventListener();
    }

    addCancelBtnEventListener() {
      this.modalInfo.MODAL_CANCEL_BTN.addEventListener('click', () => {
        this.closeModal();
      })
    }

    onPersonTileClick(selectedElement, event) {
      this.openModal();
      this.updateModalContent(selectedElement);
      this.setProfileLinkToModalBtn(selectedElement);
    }

    openModal() {
      console.log(JSON.parse(localStorage.some));
      this.modalInfo.MODAL_HTML[0].classList.add('additional-info-modal--open');
      this.modalInfo.MODAL_OVERLAY[0].classList.add('modal-overlay--open');
//    this.modalInfo.MODAL_HTML[0].style.top = `${event.pageY - 348}px `;
//    console.log(event);
    }

    updateModalContent(selectedElement) {
      // Clear container with projects
//    this.modalInfo.MODAL_INFO_PROJECTS[0].innerHTML = '';

      // Set values for title and post
      this.modalInfo.MODAL_INFO_AVATAR[0].innerHTML = `<img src=${selectedElement.image} alt=${selectedElement.text.name}>`;
      this.modalInfo.MODAL_INFO_NAME[0].innerHTML = selectedElement.text.name;
      this.modalInfo.MODAL_INFO_POST[0].innerHTML = selectedElement.additionalInfo.post;
      this.modalInfo.MODAL_INFO_PROJECTS[0].innerHTML = selectedElement.additionalInfo.projects;

      // Create project links
//    if (selectedElement.additionalInfo.projects) {
//      selectedElement.additionalInfo.projects.forEach((project) => {
//        const projectLink = document.createElement('a');
//
//        projectLink.className = 'project-link';
//        projectLink.innerHTML = `<a href="${project.url}">${project.name}</a>`;
//
//        if (this.modalInfo.MODAL_INFO_PROJECTS) {
//          this.modalInfo.MODAL_INFO_PROJECTS[0].appendChild(projectLink);
//        } else {
//          console.log('Projects link container is absent!!!!');
//        }
//      })
//    }
    }

    closeModal() {
      this.modalInfo.MODAL_HTML[0].classList.remove('additional-info-modal--open');
      this.modalInfo.MODAL_OVERLAY[0].classList.remove('modal-overlay--open');
    }

    setProfileLinkToModalBtn(selectedElement) {
      this.modalInfo.MODAL_VIEW_PROFILE[0].href = selectedElement.additionalInfo.profileLink;
    }
  }

  const modal = new Modal({
    MODAL_HTML: document.getElementsByClassName('additional-info-modal'),
    MODAL_INFO_AVATAR: document.getElementsByClassName('image-holder'),
    MODAL_INFO_NAME: document.getElementsByClassName('person-name'),
    MODAL_INFO_POST: document.getElementsByClassName('person-post'),
    MODAL_INFO_PROJECTS: document.getElementsByClassName('person-projects'),
    MODAL_OVERLAY: document.getElementsByClassName('modal-overlay'),
    MODAL_CANCEL_BTN: document.querySelector('.modal-cancel-btn'),
    MODAL_VIEW_PROFILE: document.getElementsByClassName('modal-link-btn'),
  });

  class Zoom {
    constructor(controls) {
      this.controls = controls;

      this.addControlEventListener();
      this.fullScreenMode = false;

      this.addDocumentEventListener();
    }

    addControlEventListener() {
      this.controls.ZOOM_CONTROLS.addEventListener('click', (event) => {
        this.onControlClick(event.target)
      })
    }

    addDocumentEventListener() {
      document.addEventListener('fullscreenchange', this.onToggleScreenMode);
      document.addEventListener('webkitfullscreenchange', this.onToggleScreenMode);
      document.addEventListener('mozfullscreenchange', this.onToggleScreenMode);
      document.addEventListener('MSFullscreenChange', this.onToggleScreenMode);
    }

    onControlClick(controlInfo) {
      if (Array.from(controlInfo.classList).indexOf('decrease-zoom') !== -1 && this.controls.ZOOM_VALUE > 5) {
        this.decreaseZoom();

        if (this.controls.ZOOM_VALUE <= 5) {
          this.disableControl('decrease-zoom');
        } else {
          this.enableControl('increase-zoom');
        }
      }

      if (Array.from(controlInfo.classList).indexOf('increase-zoom') !== -1 && this.controls.ZOOM_VALUE <= 15) {
        this.increaseZoom();

        if (this.controls.ZOOM_VALUE >= 15) {
          this.disableControl('increase-zoom');
        } else {
          this.enableControl('decrease-zoom');
        }
      }

      if (Array.from(controlInfo.classList).indexOf('fullscreen-mode') !== -1) {
        this.openFullScreen();
      }
    }

    increaseZoom() {
      wrapper.style.transform = `scale(${++this.controls.ZOOM_VALUE / 10})`;
    }

    decreaseZoom() {
      wrapper.style.transform = `scale(${--this.controls.ZOOM_VALUE / 10})`;
    }

    disableControl(disabledBtn) {
      switch (disabledBtn) {
        case 'decrease-zoom':
          this.controls.DECREASE_CONTROL.classList.add('zoom-control--disabled');
          break;

        case 'increase-zoom':
          this.controls.INCREASE_CONTROL.classList.add('zoom-control--disabled');
          break;
      }
    }

    enableControl(enabledBtn) {
      switch (enabledBtn) {
        case 'decrease-zoom':
          this.controls.DECREASE_CONTROL.classList.remove('zoom-control--disabled');
          break;

        case 'increase-zoom':
          this.controls.INCREASE_CONTROL.classList.remove('zoom-control--disabled');
      }
    }

    openFullScreen() {
      let elem = document.querySelector(".container");

      if (elem.requestFullscreen) {
        elem.requestFullscreen();
      } else if (elem.mozRequestFullScreen) {
        elem.mozRequestFullScreen();
      } else if (elem.webkitRequestFullScreen) {
        elem.webkitRequestFullScreen();
        console.log(elem.webkitRequestFullScreen);
      } else if (elem.msRequestFullscreen) {
        elem.msRequestFullscreen();
      }

      if (!this.fullScreenMode) {
        if (document.exitFullscreen) {
          document.exitFullscreen();
        } else if (document.webkitExitFullscreen) {
          document.webkitExitFullscreen();
        } else if (document.mozCancelFullScreen) {
          document.mozCancelFullScreen();
        } else if (document.msExitFullscreen) {
          document.msExitFullscreen();
        }
      }
    }

    onToggleScreenMode() {
      this.fullScreenMode = !this.fullScreenMode;
    }
  }

  const zoom = new Zoom({
    ZOOM_CONTROLS: document.querySelector('.zoom-controls'),
    DECREASE_CONTROL: document.querySelector('.decrease-zoom'),
    INCREASE_CONTROL: document.querySelector('.increase-zoom'),
    ZOOM_VALUE: 10,
  });

  wrapper.addEventListener('click', ((event) => {
    if (Array.from(event.target.classList).indexOf('node') !== -1) {
      getAdditionalInfo(event);
    }
  }));

  closeButton.addEventListener('click', ((event) => {
    modal.closeModal(event);
  }));

  function getAdditionalInfo(event) {
    const selectedElement = persons.find((item) => {
      return item.HTMLid == event.target.id;
    });

    modal.onPersonTileClick(selectedElement, event);
  }

  modalOverlay.addEventListener('click', ((event) => {
    modal.closeModal(event);
  }));

  tree = new Treant(chart_config);

  class FunctionalDivisionsHeads {
    constructor(divisionsInfo) {
      this.divisionsInfo = divisionsInfo;
      this.setDataTile();
    }

    setDataTile() {
      headsOfDivisions.forEach((item) => {
        const tile = document.createElement('div');

        tile.className = 'divisions_heads tile-wrapper';
        tile.innerHTML = `
         <a href="${item.profileLink}" target="_blank" class="tile tile--small tile--framed division-head-tile">
           <div class="tile-image-holder division-head__image-holder">
                ${this.onCheckImage(item)}
             </div>
            <p class="tile-name">${item.title}</p>
            <p class="tile-desc">${item.subtitle}</p>
         </a>`;

        this.divisionsInfo.SECTION_CONTAINER[0].appendChild(tile);
      });
    }

    onCheckImage(item) {
      if (item.avatar) {
        return `<img src=${item.avatar} alt=${item.name}>`
      } else {
        return `<img src='https://glo-assets.globallogic.com/system/data/1555/orange_theme/profile/avatar.jpg?1312376270' alt=${item.name}>`
      }

    }
  }

  new FunctionalDivisionsHeads({
    SECTION_CONTAINER: document.getElementsByClassName('division-heads'),
  });

  class CommonClass {
    constructor(info) {
      this.info = info;
      this.setDataTile();
    }

    setDataTile() {
      this.info.data.forEach((item) => {
        const tile = document.createElement('div');

        tile.className = this.info.classEl;
        tile.innerHTML = `
        <a href="${item.profileLink}" target="_blank" class="tile tile--big">
          <div class="tile-image-holder united-tiles-section__image-holder">
             ${CommonClass.onCheckImage(item)}
          </div>
          <p class="tile-desc">${item.subtitle}</p>
          <p class="tile-name">${item.title}</p>
        </a>`;

        this.info.SECTION_CONTAINER[0].appendChild(tile);
      });
    }

    static onCheckImage(item) {
      if (item.avatar) {
        return `<img src=${item.avatar} alt=${item.name}>`
      } else {
        return `<img src='https://glo-assets.globallogic.com/system/data/1555/orange_theme/profile/avatar.jpg?1312376270' alt=${item.name}>`
      }
    }
  }

  new CommonClass({
    SECTION_CONTAINER: document.getElementsByClassName('strategic-focus-area__tiles-holder'),
    classEl: 'tile-wrapper',
    data: focusAreasPersons
  });

  new CommonClass({
    SECTION_CONTAINER: document.getElementsByClassName('technology-leads__tiles-holder'),
    classEl: 'tile-wrapper',
    data: technologyLeads
  });

  new CommonClass({
    SECTION_CONTAINER: document.getElementsByClassName('practices-leads__tiles-holder'),
    classEl: 'tile-wrapper',
    data: practicesLeads
  });



</script>

</body>
</html>